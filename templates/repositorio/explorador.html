{% extends 'base.html' %}
{% load static %}

{% block title %}Repositorio — OASIS{% endblock %}

{% block three_canvas %}{% endblock %}

{% block extra_head %}
<style>
    /* ─── Repositorio Layout ────────────────────────── */
    .repo-hero {
        background: linear-gradient(135deg, #064e3b 0%, #047857 40%, #059669 100%);
        position: relative;
        overflow: hidden;
    }
    .repo-hero::before {
        content: '';
        position: absolute;
        top: -50%; right: -20%;
        width: 500px; height: 500px;
        background: radial-gradient(circle, rgba(249,115,22,0.15), transparent 70%);
        border-radius: 50%;
    }
    .repo-hero::after {
        content: '';
        position: absolute;
        bottom: -30%; left: -10%;
        width: 400px; height: 400px;
        background: radial-gradient(circle, rgba(16,185,129,0.2), transparent 70%);
        border-radius: 50%;
    }

    /* ─── Filter Sidebar ────────────────────────────── */
    .filter-sidebar {
        position: sticky;
        top: 5rem;
        max-height: calc(100vh - 6rem);
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: #d1d5db transparent;
    }
    .filter-group {
        border-bottom: 1px solid #f3f4f6;
        padding-bottom: 0.75rem;
        margin-bottom: 0.75rem;
    }
    .filter-group:last-child { border-bottom: none; }
    .filter-title {
        font-size: 0.7rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: #6b7280;
        margin-bottom: 0.5rem;
    }
    .filter-option {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.35rem 0.5rem;
        border-radius: 0.5rem;
        font-size: 0.8rem;
        color: #374151;
        cursor: pointer;
        transition: all 0.15s;
        text-decoration: none;
    }
    .filter-option:hover { background: #f3f4f6; color: #059669; }
    .filter-option.active { background: #ecfdf5; color: #059669; font-weight: 600; }
    .filter-option .count {
        font-size: 0.65rem;
        background: #f3f4f6;
        color: #6b7280;
        padding: 0.1rem 0.4rem;
        border-radius: 9999px;
        font-weight: 600;
    }
    .filter-option.active .count { background: #d1fae5; color: #059669; }

    /* ─── Project Cards ─────────────────────────────── */
    .project-card {
        background: #fff;
        border: 1px solid #f3f4f6;
        border-radius: 1rem;
        overflow: hidden;
        transition: all 0.3s cubic-bezier(.4,0,.2,1);
    }
    .project-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.08);
        border-color: rgba(5,150,105,0.2);
    }
    .card-thumb {
        height: 180px;
        background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
    }
    .card-thumb img {
        width: 100%; height: 100%;
        object-fit: cover;
    }
    .card-thumb .thumb-icon {
        font-size: 2.5rem;
        color: #d1d5db;
    }
    .card-thumb .preview-badge {
        position: absolute;
        top: 0.75rem;
        right: 0.75rem;
        background: rgba(0,0,0,0.6);
        backdrop-filter: blur(8px);
        color: #fff;
        font-size: 0.6rem;
        font-weight: 700;
        padding: 0.2rem 0.5rem;
        border-radius: 0.375rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }
    .card-thumb .version-badge {
        position: absolute;
        top: 0.75rem;
        left: 0.75rem;
        background: rgba(5,150,105,0.9);
        color: #fff;
        font-size: 0.6rem;
        font-weight: 700;
        padding: 0.2rem 0.5rem;
        border-radius: 0.375rem;
    }
    .card-thumb .featured-star {
        position: absolute;
        bottom: 0.75rem;
        right: 0.75rem;
        color: #f97316;
        font-size: 1.1rem;
        filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
    }
    .card-body { padding: 1rem 1.25rem; }
    .card-title {
        font-weight: 800;
        font-size: 0.95rem;
        color: #111827;
        line-height: 1.3;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    .card-author {
        font-size: 0.75rem;
        color: #6b7280;
        margin-top: 0.25rem;
    }
    .card-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.3rem;
        margin-top: 0.5rem;
    }
    .card-tag {
        font-size: 0.6rem;
        font-weight: 600;
        padding: 0.15rem 0.4rem;
        border-radius: 0.25rem;
        background: #f3f4f6;
        color: #6b7280;
    }
    .card-footer {
        padding: 0.75rem 1.25rem;
        border-top: 1px solid #f9fafb;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    .card-stat {
        display: flex;
        align-items: center;
        gap: 0.25rem;
        font-size: 0.7rem;
        color: #9ca3af;
    }
    .card-stat i { font-size: 0.65rem; }
    .card-cluster {
        font-size: 0.6rem;
        font-weight: 700;
        padding: 0.15rem 0.45rem;
        border-radius: 0.375rem;
    }
    .cluster-TICS { background: #dbeafe; color: #1d4ed8; }
    .cluster-ADMIN { background: #fef3c7; color: #92400e; }
    .cluster-SALUD { background: #fce7f3; color: #9d174d; }
    .cluster-INDUSTRIAL { background: #e0e7ff; color: #4338ca; }
    .cluster-CREATIVAS { background: #f3e8ff; color: #7c3aed; }
    .cluster-AGRO { background: #d1fae5; color: #065f46; }
    .cluster-TURISMO { background: #ffedd5; color: #c2410c; }

    /* ─── Preview type icons ────────────────────────── */
    .preview-CODE { color: #3b82f6; }
    .preview-MEDIA_3D { color: #8b5cf6; }
    .preview-GALLERY { color: #ec4899; }
    .preview-DOCUMENT { color: #6b7280; }
    .preview-VIDEO { color: #ef4444; }

    /* ─── Search bar ────────────────────────────────── */
    .repo-search {
        background: rgba(255,255,255,0.15);
        border: 1px solid rgba(255,255,255,0.25);
        border-radius: 0.75rem;
        padding: 0.75rem 1rem 0.75rem 2.75rem;
        color: #fff;
        font-size: 0.9rem;
        width: 100%;
        max-width: 36rem;
        transition: all 0.3s;
        outline: none;
    }
    .repo-search::placeholder { color: rgba(255,255,255,0.5); }
    .repo-search:focus {
        background: rgba(255,255,255,0.2);
        border-color: rgba(255,255,255,0.4);
        box-shadow: 0 0 0 3px rgba(255,255,255,0.1);
    }

    /* ─── Sort pills ────────────────────────────────── */
    .sort-pill {
        padding: 0.35rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 600;
        color: #6b7280;
        background: #fff;
        border: 1px solid #e5e7eb;
        cursor: pointer;
        transition: all 0.2s;
        text-decoration: none;
    }
    .sort-pill:hover { border-color: #059669; color: #059669; }
    .sort-pill.active { background: #059669; color: #fff; border-color: #059669; }

    /* ─── Empty state ───────────────────────────────── */
    .empty-state {
        text-align: center;
        padding: 4rem 2rem;
    }
    .empty-state i { font-size: 3rem; color: #d1d5db; margin-bottom: 1rem; }

    /* ─── Mobile filter toggle ──────────────────────── */
    @media (max-width: 1023px) {
        .filter-sidebar {
            position: fixed;
            top: 0; left: 0; bottom: 0;
            width: 18rem;
            background: #fff;
            z-index: 50;
            padding: 1.5rem;
            transform: translateX(-100%);
            transition: transform 0.3s;
            box-shadow: 4px 0 20px rgba(0,0,0,0.1);
        }
        .filter-sidebar.open { transform: translateX(0); }
        .filter-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.3);
            z-index: 45;
            display: none;
        }
        .filter-overlay.active { display: block; }
    }
</style>
{% endblock %}

{% block navbar %}
{% include 'partials/navbar_auth.html' %}
{% endblock %}

{% block content %}
<!-- ═══ Hero Search Bar ═══════════════════════════════════════ -->
<section class="repo-hero pt-24 pb-12 px-4">
    <div class="max-w-7xl mx-auto relative z-10">
        <div class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-black text-white mb-2">
                Repositorio de Proyectos
            </h1>
            <p class="text-emerald-200 text-sm sm:text-base max-w-xl mx-auto">
                Explora {{ total_count }} proyecto{{ total_count|pluralize }} de grado de las 44 carreras tecnicas del SENA
            </p>
        </div>

        <!-- Search -->
        <form method="get" action="{% url 'repositorio:explorador' %}" class="flex justify-center" id="search-form">
            <div class="relative w-full max-w-xl">
                <i class="fa-solid fa-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 text-white/50"></i>
                <input type="text" name="q" value="{{ query }}" class="repo-search"
                       placeholder="Buscar por titulo, autor, ficha, herramientas...">
                <!-- Preserve filters -->
                {% if selected_carrera %}<input type="hidden" name="carrera" value="{{ selected_carrera }}">{% endif %}
                {% if selected_cluster %}<input type="hidden" name="cluster" value="{{ selected_cluster }}">{% endif %}
                {% if selected_anio %}<input type="hidden" name="anio" value="{{ selected_anio }}">{% endif %}
                {% if selected_tag %}<input type="hidden" name="tag" value="{{ selected_tag }}">{% endif %}
                {% if selected_sort %}<input type="hidden" name="sort" value="{{ selected_sort }}">{% endif %}
            </div>
        </form>

        <!-- Quick Stats -->
        <div class="flex justify-center gap-6 mt-6 text-emerald-100 text-xs font-medium">
            {% for key, data in stats_by_cluster.items %}
            <span class="flex items-center gap-1.5">
                <span class="w-2 h-2 rounded-full bg-emerald-400"></span>
                {{ data.name }}: {{ data.count }}
            </span>
            {% endfor %}
        </div>
    </div>
</section>

<!-- ═══ Main Content: Sidebar + Grid ═════════════════════════ -->
<section class="max-w-7xl mx-auto px-4 py-8">

    <!-- Mobile filter toggle -->
    <div class="lg:hidden mb-4 flex items-center justify-between">
        <button onclick="toggleFilters()" class="flex items-center gap-2 px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-semibold text-gray-700 hover:border-oasis-500 transition">
            <i class="fa-solid fa-sliders"></i> Filtros
        </button>
        <span class="text-xs text-gray-500">{{ total_count }} resultado{{ total_count|pluralize }}</span>
    </div>

    <!-- Filter overlay (mobile) -->
    <div class="filter-overlay" id="filter-overlay" onclick="toggleFilters()"></div>

    <div class="flex gap-6">
        <!-- ── Filter Sidebar ─────────────────────────── -->
        <aside class="filter-sidebar w-64 flex-shrink-0 hidden lg:block" id="filter-sidebar">
            <div class="bg-white border border-gray-100 rounded-xl p-4">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-sm font-bold text-gray-800">
                        <i class="fa-solid fa-filter text-oasis-600 mr-1.5"></i>Filtros
                    </h3>
                    {% if selected_carrera or selected_cluster or selected_anio or selected_tag or selected_tipo %}
                    <a href="{% url 'repositorio:explorador' %}{% if query %}?q={{ query }}{% endif %}"
                       class="text-xs text-red-500 hover:text-red-700 font-semibold">
                        <i class="fa-solid fa-xmark mr-0.5"></i>Limpiar
                    </a>
                    {% endif %}
                </div>

                <!-- Cluster filter -->
                <div class="filter-group">
                    <div class="filter-title">Facultad / Cluster</div>
                    {% for key, data in stats_by_cluster.items %}
                    <a href="?{% if query %}q={{ query }}&{% endif %}cluster={{ key }}{% if selected_anio %}&anio={{ selected_anio }}{% endif %}&sort={{ selected_sort }}"
                       class="filter-option {% if selected_cluster == key %}active{% endif %}">
                        <span>{{ data.name }}</span>
                        <span class="count">{{ data.count }}</span>
                    </a>
                    {% endfor %}
                </div>

                <!-- Career filter -->
                <div class="filter-group">
                    <div class="filter-title">Carrera</div>
                    <div class="max-h-48 overflow-y-auto" style="scrollbar-width:thin;">
                        {% for val, label in carrera_choices %}
                        <a href="?{% if query %}q={{ query }}&{% endif %}carrera={{ val }}{% if selected_anio %}&anio={{ selected_anio }}{% endif %}&sort={{ selected_sort }}"
                           class="filter-option {% if selected_carrera == val %}active{% endif %}">
                            <span class="truncate">{{ label }}</span>
                        </a>
                        {% endfor %}
                    </div>
                </div>

                <!-- Year filter -->
                {% if available_years %}
                <div class="filter-group">
                    <div class="filter-title">Ano</div>
                    {% for y in available_years %}
                    <a href="?{% if query %}q={{ query }}&{% endif %}{% if selected_cluster %}cluster={{ selected_cluster }}&{% endif %}{% if selected_carrera %}carrera={{ selected_carrera }}&{% endif %}anio={{ y }}&sort={{ selected_sort }}"
                       class="filter-option {% if selected_anio == y|stringformat:'d' %}active{% endif %}">
                        {{ y }}
                    </a>
                    {% endfor %}
                </div>
                {% endif %}

                <!-- Preview Type filter -->
                <div class="filter-group">
                    <div class="filter-title">Tipo de Proyecto</div>
                    <a href="?{% if query %}q={{ query }}&{% endif %}tipo=CODE&sort={{ selected_sort }}"
                       class="filter-option {% if selected_tipo == 'CODE' %}active{% endif %}">
                        <span><i class="fa-solid fa-code preview-CODE mr-1"></i>Software</span>
                    </a>
                    <a href="?{% if query %}q={{ query }}&{% endif %}tipo=MEDIA_3D&sort={{ selected_sort }}"
                       class="filter-option {% if selected_tipo == 'MEDIA_3D' %}active{% endif %}">
                        <span><i class="fa-solid fa-cube preview-MEDIA_3D mr-1"></i>3D / Animacion</span>
                    </a>
                    <a href="?{% if query %}q={{ query }}&{% endif %}tipo=GALLERY&sort={{ selected_sort }}"
                       class="filter-option {% if selected_tipo == 'GALLERY' %}active{% endif %}">
                        <span><i class="fa-solid fa-images preview-GALLERY mr-1"></i>Diseno / Galeria</span>
                    </a>
                    <a href="?{% if query %}q={{ query }}&{% endif %}tipo=VIDEO&sort={{ selected_sort }}"
                       class="filter-option {% if selected_tipo == 'VIDEO' %}active{% endif %}">
                        <span><i class="fa-solid fa-film preview-VIDEO mr-1"></i>Audiovisual</span>
                    </a>
                    <a href="?{% if query %}q={{ query }}&{% endif %}tipo=DOCUMENT&sort={{ selected_sort }}"
                       class="filter-option {% if selected_tipo == 'DOCUMENT' %}active{% endif %}">
                        <span><i class="fa-solid fa-file-alt preview-DOCUMENT mr-1"></i>Documento</span>
                    </a>
                </div>

                <!-- Tags -->
                {% if popular_tags %}
                <div class="filter-group">
                    <div class="filter-title">Tags Populares</div>
                    <div class="flex flex-wrap gap-1.5">
                        {% for t in popular_tags %}
                        <a href="?{% if query %}q={{ query }}&{% endif %}tag={{ t.slug }}&sort={{ selected_sort }}"
                           class="card-tag hover:bg-oasis-100 hover:text-oasis-700 transition {% if selected_tag == t.slug %}bg-oasis-100 text-oasis-700{% endif %}">
                            {{ t.nombre }}
                        </a>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>
        </aside>

        <!-- ── Cards Grid ─────────────────────────────── -->
        <div class="flex-1 min-w-0">
            <!-- Sort bar -->
            <div class="flex items-center justify-between mb-4 flex-wrap gap-3">
                <p class="text-sm text-gray-500 hidden lg:block">
                    <span class="font-bold text-gray-800">{{ total_count }}</span> proyecto{{ total_count|pluralize }} encontrado{{ total_count|pluralize }}
                </p>
                <div class="flex items-center gap-2">
                    <span class="text-xs text-gray-400 mr-1">Ordenar:</span>
                    <a href="?{% if query %}q={{ query }}&{% endif %}{% if selected_carrera %}carrera={{ selected_carrera }}&{% endif %}{% if selected_cluster %}cluster={{ selected_cluster }}&{% endif %}{% if selected_anio %}anio={{ selected_anio }}&{% endif %}sort=recientes"
                       class="sort-pill {% if selected_sort == 'recientes' %}active{% endif %}">Recientes</a>
                    <a href="?{% if query %}q={{ query }}&{% endif %}{% if selected_carrera %}carrera={{ selected_carrera }}&{% endif %}{% if selected_cluster %}cluster={{ selected_cluster }}&{% endif %}{% if selected_anio %}anio={{ selected_anio }}&{% endif %}sort=populares"
                       class="sort-pill {% if selected_sort == 'populares' %}active{% endif %}">Populares</a>
                    <a href="?{% if query %}q={{ query }}&{% endif %}{% if selected_carrera %}carrera={{ selected_carrera }}&{% endif %}{% if selected_cluster %}cluster={{ selected_cluster }}&{% endif %}{% if selected_anio %}anio={{ selected_anio }}&{% endif %}sort=descargas"
                       class="sort-pill {% if selected_sort == 'descargas' %}active{% endif %}">Descargas</a>
                    <a href="?{% if query %}q={{ query }}&{% endif %}{% if selected_carrera %}carrera={{ selected_carrera }}&{% endif %}{% if selected_cluster %}cluster={{ selected_cluster }}&{% endif %}{% if selected_anio %}anio={{ selected_anio }}&{% endif %}sort=titulo"
                       class="sort-pill {% if selected_sort == 'titulo' %}active{% endif %}">A-Z</a>
                </div>
            </div>

            <!-- Active filters -->
            {% if selected_carrera or selected_cluster or selected_anio or selected_tag or selected_tipo or query %}
            <div class="flex flex-wrap gap-2 mb-4">
                {% if query %}
                <span class="inline-flex items-center gap-1 px-3 py-1 bg-oasis-50 text-oasis-700 rounded-full text-xs font-semibold">
                    <i class="fa-solid fa-search"></i> "{{ query }}"
                    <a href="?{% if selected_carrera %}carrera={{ selected_carrera }}&{% endif %}{% if selected_cluster %}cluster={{ selected_cluster }}&{% endif %}sort={{ selected_sort }}" class="ml-1 hover:text-red-500"><i class="fa-solid fa-xmark"></i></a>
                </span>
                {% endif %}
                {% if selected_cluster %}
                <span class="inline-flex items-center gap-1 px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-xs font-semibold">
                    <i class="fa-solid fa-layer-group"></i> {{ selected_cluster }}
                    <a href="?{% if query %}q={{ query }}&{% endif %}sort={{ selected_sort }}" class="ml-1 hover:text-red-500"><i class="fa-solid fa-xmark"></i></a>
                </span>
                {% endif %}
                {% if selected_carrera %}
                <span class="inline-flex items-center gap-1 px-3 py-1 bg-purple-50 text-purple-700 rounded-full text-xs font-semibold">
                    <i class="fa-solid fa-graduation-cap"></i> {{ selected_carrera }}
                    <a href="?{% if query %}q={{ query }}&{% endif %}{% if selected_cluster %}cluster={{ selected_cluster }}&{% endif %}sort={{ selected_sort }}" class="ml-1 hover:text-red-500"><i class="fa-solid fa-xmark"></i></a>
                </span>
                {% endif %}
                {% if selected_anio %}
                <span class="inline-flex items-center gap-1 px-3 py-1 bg-amber-50 text-amber-700 rounded-full text-xs font-semibold">
                    <i class="fa-solid fa-calendar"></i> {{ selected_anio }}
                    <a href="?{% if query %}q={{ query }}&{% endif %}{% if selected_cluster %}cluster={{ selected_cluster }}&{% endif %}{% if selected_carrera %}carrera={{ selected_carrera }}&{% endif %}sort={{ selected_sort }}" class="ml-1 hover:text-red-500"><i class="fa-solid fa-xmark"></i></a>
                </span>
                {% endif %}
            </div>
            {% endif %}

            <!-- Cards -->
            {% if proyectos %}
            <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-5">
                {% for p in proyectos %}
                <a href="{% url 'repositorio:detalle' p.pk %}" class="project-card block">
                    <!-- Thumbnail -->
                    <div class="card-thumb">
                        {% if p.thumbnail_url %}
                        <img src="{{ p.thumbnail_url }}" alt="{{ p.titulo }}" loading="lazy">
                        {% else %}
                        <div class="thumb-icon">
                            {% if p.preview_type == 'CODE' %}
                            <i class="fa-solid fa-laptop-code"></i>
                            {% elif p.preview_type == 'MEDIA_3D' %}
                            <i class="fa-solid fa-cube"></i>
                            {% elif p.preview_type == 'GALLERY' %}
                            <i class="fa-solid fa-palette"></i>
                            {% elif p.preview_type == 'VIDEO' %}
                            <i class="fa-solid fa-video"></i>
                            {% else %}
                            <i class="fa-solid fa-file-alt"></i>
                            {% endif %}
                        </div>
                        {% endif %}

                        <span class="preview-badge">{{ p.preview_type_display }}</span>

                        {% if p.version_actual != 'V1' %}
                        <span class="version-badge">{{ p.get_version_actual_display }}</span>
                        {% endif %}

                        {% if p.destacado %}
                        <span class="featured-star"><i class="fa-solid fa-star"></i></span>
                        {% endif %}
                    </div>

                    <!-- Body -->
                    <div class="card-body">
                        <h3 class="card-title">{{ p.titulo }}</h3>
                        <p class="card-author">
                            <i class="fa-solid fa-user mr-0.5"></i> {{ p.autor }}
                            {% if p.ficha %}<span class="text-gray-400 ml-1">· Ficha {{ p.ficha }}</span>{% endif %}
                        </p>
                        <p class="text-xs text-gray-400 mt-1">{{ p.get_carrera_display }}</p>

                        {% if p.tags_list %}
                        <div class="card-tags">
                            {% for tag in p.tags_list|slice:":4" %}
                            <span class="card-tag">{{ tag }}</span>
                            {% endfor %}
                            {% if p.tags_list|length > 4 %}
                            <span class="card-tag">+{{ p.tags_list|length|add:"-4" }}</span>
                            {% endif %}
                        </div>
                        {% endif %}
                    </div>

                    <!-- Footer -->
                    <div class="card-footer">
                        <div class="flex items-center gap-3">
                            <span class="card-stat"><i class="fa-solid fa-heart text-red-400"></i> {{ p.votos }}</span>
                            <span class="card-stat"><i class="fa-solid fa-download text-blue-400"></i> {{ p.descargas }}</span>
                            <span class="card-stat"><i class="fa-solid fa-eye text-gray-400"></i> {{ p.vistas }}</span>
                            {% if p.archivos_count > 0 %}
                            <span class="card-stat"><i class="fa-solid fa-paperclip text-orange-400"></i> {{ p.archivos_count }}</span>
                            {% endif %}
                        </div>
                        <span class="card-cluster cluster-{{ p.cluster }}">{{ p.cluster }}</span>
                    </div>
                </a>
                {% endfor %}
            </div>
            {% else %}
            <!-- Empty state -->
            <div class="empty-state">
                <i class="fa-solid fa-folder-open"></i>
                <h3 class="text-lg font-bold text-gray-800 mb-1">No se encontraron proyectos</h3>
                <p class="text-sm text-gray-500 mb-4">
                    {% if query %}No hay resultados para "{{ query }}".{% else %}Aun no hay proyectos publicados con estos filtros.{% endif %}
                </p>
                <a href="{% url 'repositorio:explorador' %}" class="inline-flex items-center gap-2 px-4 py-2 bg-oasis-600 text-white rounded-lg text-sm font-semibold hover:bg-oasis-700 transition">
                    <i class="fa-solid fa-rotate-left"></i> Ver todos
                </a>
            </div>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script>
function toggleFilters() {
    const sidebar = document.getElementById('filter-sidebar');
    const overlay = document.getElementById('filter-overlay');
    sidebar.classList.toggle('open');
    overlay.classList.toggle('active');
}
</script>
{% endblock %}
